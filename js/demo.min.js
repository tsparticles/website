async function initDemo(){let editor,fixOptions=function(options){options&&(options.particles&&(options.particles.groups instanceof Array&&options.particles.groups||(options.particles.groups=[])),options.interactivity&&options.interactivity.modes&&options.interactivity.modes.push&&(options.interactivity.modes.push.groups instanceof Array&&options.interactivity.modes.push.groups||(options.interactivity.modes.push.groups=[])),options.manualParticles instanceof Array&&options.manualParticles||(options.manualParticles=[]),options.responsive instanceof Array&&options.responsive||(options.responsive=[]),options.themes instanceof Array&&options.themes||(options.themes=[]))},schema={};const stats=new Stats;stats.addPanel("count","#ff8",0,(()=>{const container=tsParticles.domItem(0);if(container)return maxParticles=Math.max(container.particles.count,maxParticles),{value:container.particles.count,maxValue:maxParticles}}));let maxParticles=0;stats.showPanel(2),stats.dom.style.position="absolute",stats.dom.style.left="3px",stats.dom.style.top="3px",stats.dom.id="stats-graph";function distinct(value,index,self){return self.indexOf(value)===index}let getSchemaValuesFromPath=function(obj,path,index){const key=path[index];return function(prop,path,index){if(prop){if(prop.type)switch(prop.type){case"boolean":return["true","false"];case"number":case"string":return prop.enum;case"array":return getSchemaValuesFromProp(prop.items);default:return}if(prop.$ref){const def=prop.$ref.split("/"),type=def[def.length-1],typeDef=schema.definitions[type];return getSchemaValuesFromPath(typeDef,path,index+(/I[A-Z]/.exec(type)?1:0))}if(prop.anyOf){const res=[];for(const type of prop.anyOf){const values=getSchemaValuesFromProp(type,path,index);for(const value of values)res.push(value)}return res.filter(distinct)}}}(obj.properties?obj.properties[key]:obj,path,index)},jsonEditorAutoComplete=function(text,path,input,editor){try{switch(input){case"field":break;case"value":return getSchemaValuesFromPath(schema,path,0).filter((function(v){return v.includes(text)}))}}catch(e){}return null},refreshParticles=function(callback){tsParticles.domItem(0).refresh().then((()=>{callback&&"function"==typeof callback&&callback()}))},toggleSidebar=function(){const rightCaret=document.body.querySelector(".caret-right"),leftCaret=document.body.querySelector(".caret-left"),sidebar=document.getElementById("sidebar");sidebar.hasAttribute("hidden")?(rightCaret.setAttribute("hidden",""),leftCaret.removeAttribute("hidden"),sidebar.removeAttribute("hidden"),sidebar.classList.add("d-md-block")):(leftCaret.setAttribute("hidden",""),rightCaret.removeAttribute("hidden"),sidebar.setAttribute("hidden",""),sidebar.classList.remove("d-md-block")),refreshParticles()},exportImage=async function(){const container=tsParticles.domItem(0);if(container){const modalBody=document.body.querySelector("#exportModal .modal-body .modal-body-content"),particlesContainer=document.getElementById("tsparticles");modalBody.innerHTML="",modalBody.style.backgroundColor=particlesContainer.style.backgroundColor,modalBody.style.backgroundImage=particlesContainer.style.backgroundImage,modalBody.style.backgroundPosition=particlesContainer.style.backgroundPosition,modalBody.style.backgroundRepeat=particlesContainer.style.backgroundRepeat,modalBody.style.backgroundSize=particlesContainer.style.backgroundSize;const image=new Image;image.className="img-fluid",image.onload=()=>URL.revokeObjectURL(image.src);const blob=await container.export("image"),url=URL.createObjectURL(blob);image.src=url,modalBody.appendChild(image);new bootstrap.Modal(document.getElementById("exportModal")).show()}},exportVideo=async function(){const container=tsParticles.domItem(0);if(container){const blob=await container.export("video"),modalBody=document.body.querySelector("#exportModal .modal-body .modal-body-content");modalBody.innerHTML="",modalBody.style.backgroundColor=container.canvas.element.style.backgroundColor,modalBody.style.backgroundImage=container.canvas.element.style.backgroundImage,modalBody.style.backgroundPosition=container.canvas.element.style.backgroundPosition,modalBody.style.backgroundRepeat=container.canvas.element.style.backgroundRepeat,modalBody.style.backgroundSize=container.canvas.element.style.backgroundSize;const downloadLink=document.createElement("a");downloadLink.className="btn btn-primary",downloadLink.download="particles.mp4",downloadLink.href=URL.createObjectURL(blob),downloadLink.innerText="Download";const video=document.createElement("video");video.className="img-fluid",video.onload=()=>URL.revokeObjectURL(image.src),video.autoplay=!0,video.controls=!0,video.loop=!0,video.src=URL.createObjectURL(blob),video.load(),modalBody.appendChild(video),modalBody.appendChild(downloadLink);new bootstrap.Modal(document.getElementById("exportModal")).show()}},exportConfig=async function(){const container=tsParticles.domItem(0);if(container){const modalBody=document.body.querySelector("#exportModal .modal-body .modal-body-content"),blob=await container.export("json"),json=await blob.text();modalBody.innerHTML=`<pre>${json}</pre>`;const copyBtn=document.querySelector("#exportConfigCopy"),downloadBtn=document.querySelector("#exportConfigDownload");copyBtn.onclick=function(){navigator.clipboard&&navigator.clipboard.writeText(json)},downloadBtn.onclick=function(){const contentType="application/json",blob=new Blob([json],{type:contentType}),url=URL.createObjectURL(blob),a=document.createElement("a");a.download="particles.json",a.href=url,a.dataset.downloadUrl=[contentType,a.download,a.href].join(":");const e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(e)};new bootstrap.Modal(document.getElementById("exportModal")).show()}},codepenExport=function(){const container=tsParticles.domItem(0);if(container){const form=document.getElementById("code-pen-form"),inputData=document.getElementById("code-pen-data"),data=(document.getElementById("tsparticles"),{html:'\x3c!-- tsParticles - https://particles.js.org - https://github.com/matteobruni/tsparticles --\x3e\n<div id="tsparticles"></div>',css:"",js:`tsParticles.load({\n    id: "tsparticles",\n    options: ${JSON.stringify(container.options,((key,value)=>{if("_engine"!==key&&"_container"!==key)return value}))}\n});`,js_external:"https://cdn.jsdelivr.net/npm/@tsparticles/all@3.7.1/tsparticles.all.bundle.min.js",title:"tsParticles example",description:"This pen was created with tsParticles from https://particles.js.org",tags:"tsparticles, javascript, typescript, design, animation",editors:"001"}),JSONstring=JSON.stringify(data).replace(/"/g,"&quot;").replace(/'/g,"&apos;");inputData.value=JSONstring,form.submit()}},toggleStats=function(){const statsEl=document.body.querySelector("#stats");statsEl.hasAttribute("hidden")?statsEl.removeAttribute("hidden"):statsEl.setAttribute("hidden","")},btnParticlesUpdate=function(){tsParticles.domItem(0).options.load(editor.get()),refreshParticles((()=>{}))},changeGenericPreset=function(presetId){localStorage.presetId;localStorage.presetId=presetId,window.location.hash=presetId,function(editor){const presetItems=document.body.querySelectorAll(".preset-item"),randomPreset=presetItems[Math.floor(Math.random()*presetItems.length)].dataset.preset,presetId=localStorage.presetId||randomPreset,options=tsParticles.configs[presetId];fixOptions(options),tsParticles.load({id:"tsparticles",options:options}).then((particles=>{localStorage.presetId=presetId,window.location.hash=presetId;const omit=obj=>_.omitBy(obj,((value,key)=>_.startsWith(key,"_"))),transform=obj=>_.transform(omit(obj),(function(result,value,key){result[key]=_.isObject(value)?transform(omit(value)):value})),editorOptions=transform(particles.actualOptions);fixOptions(editorOptions),editor.update(editorOptions),editor.expandAll()}))}(editor)},changeNavPreset=function(){changeGenericPreset(this.dataset.preset)};window.addEventListener("hashchange",(function(){const presets=document.body.querySelectorAll(".preset-item");if(window.location.hash)for(let i=0;i<presets.length;i++)if(presets[i].dataset.preset===window.location.hash.replace("#",""))return localStorage.presetId=window.location.hash.replace("#",""),void changeGenericPreset(localStorage.presetId)})),window.addEventListener("load",(async()=>{const element=document.getElementById("editor");editor=new JSONEditor(element,{mode:"form",modes:["code","form","view","preview","text"],autocomplete:{filter:"contain",trigger:"focus",getOptions:jsonEditorAutoComplete},onError:function(err){alert(err.toString())},onModeChange:function(newMode,oldMode){},onChange:function(){}});const presetItems=document.body.querySelectorAll(".preset-item");if(window.location.hash)for(let i=0;i<presetItems.length;i++)if(presetItems[i].dataset.preset===window.location.hash.replace("#","")){localStorage.presetId=window.location.hash.replace("#","");break}localStorage.presetId||(localStorage.presetId=presetItems[Math.floor(Math.random()*presetItems.length)].dataset.preset),document.getElementById("btnUpdate").addEventListener("click",btnParticlesUpdate),document.getElementById("btnNavUpdate").addEventListener("click",btnParticlesUpdate),document.getElementById("stats").appendChild(stats.dom),document.getElementById("toggle-stats").addEventListener("click",toggleStats),document.getElementById("nav-toggle-stats").addEventListener("click",toggleStats),document.body.querySelector(".toggle-sidebar").addEventListener("click",toggleSidebar);for(const presetItem of presetItems)presetItem.addEventListener("click",changeNavPreset);document.getElementById("export-image").addEventListener("click",exportImage),document.getElementById("nav-export-image").addEventListener("click",exportImage),document.getElementById("export-video").addEventListener("click",exportVideo),document.getElementById("nav-export-video").addEventListener("click",exportVideo),document.getElementById("export-config").addEventListener("click",exportConfig),document.getElementById("nav-export-config").addEventListener("click",exportConfig),document.getElementById("codepen-export").addEventListener("click",codepenExport),document.getElementById("nav-codepen-export").addEventListener("click",codepenExport),function(){const rightCaret=document.body.querySelector(".caret-right"),leftCaret=document.body.querySelector(".caret-left");document.getElementById("sidebar").hasAttribute("hidden")?(leftCaret.setAttribute("hidden",""),rightCaret.removeAttribute("hidden")):(rightCaret.setAttribute("hidden",""),leftCaret.removeAttribute("hidden"))}(),function(){const update=function(){stats.begin(),stats.end(),requestAnimationFrame(update)};requestAnimationFrame(update)}(),await loadAll(tsParticles),changeGenericPreset(localStorage.presetId)}))}initDemo();